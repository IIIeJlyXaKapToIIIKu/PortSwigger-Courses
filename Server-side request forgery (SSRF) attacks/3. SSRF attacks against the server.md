## SSRF attacks on the server
In a SSRF attack on the server, the attacker tricks the application into making an HTTP request back to the server itself, via a loopback interface. This is typically done via a URL with the hostname `127.0.0.1` (the reserved IP address of the loopback adapter) or `localhost` (a common name for the same adapter).

For example, imagine a store where a user can check the availability of a product at a specific branch. To get the inventory information, the application queries various backend REST APIs, passing the URL of the desired API endpoint via a frontend HTTP request. When a user views the product status, their browser sends a request like this:
```Request
POST /product/stock HTTP/1.0
Content-Type: application/x-www-form-urlencoded
Content-Length: 118

stockApi=http://stock.weliketoshop.net:8080/product/stock/check%3FproductId%3D6%26storeId%3D1
```
This causes the server to request the specified URL, get the stock status, and return it to the user.

In this scenario, an attacker can modify the request to specify the server's local URL:
```Request
POST /product/stock HTTP/1.0
Content-Type: application/x-www-form-urlencoded
Content-Length: 118

stockApi=http://localhost/admin
```
The server will download the contents of the URL `/admin` and return it to the user.

Although an attacker can access `/admin`, administrative functionality is usually only available to authenticated users. However, if a request to `/admin` comes from the local machine, standard access checks are bypassed. The application provides full access to the admin panel, since the request is perceived as coming from a trusted source.

**Why do applications behave this way and implicitly trust local requests?** The reasons may be different:
- Access rights checking is implemented in a separate component before the application server. When connecting to the server itself, the check is skipped.
- For disaster recovery: access to the admin panel without authorization is allowed from the local machine (it is assumed that only the administrator has access to the server).
- The administrative interface may run on a different port and be inaccessible to users directly.

Such trust relationships for local requests often make SSRF a critical vulnerability.