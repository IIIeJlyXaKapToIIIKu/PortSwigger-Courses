When performing a SQL injection attack using the UNION operator, there are two effective methods for determining the number of columns returned by the original query.
One method is to inject a series of `ORDER BY` statements and increment the column index until an error occurs. For example, if the injection point is a row in the `WHERE` clause of the original query, we can inject:
```SQL
' ORDER BY 1--
' ORDER BY 2--
' ORDER BY 3--
and so on.
```
This series of payloads modifies the original query to order the results by different columns in the result set. The column in the `ORDER BY` statement can be specified by index, so there is no need to know the column names. When the specified column index exceeds the number of actual columns in the result set, the database returns an error, such as:
```ERROR
The ORDER BY position number 3 is out of range of the number of items in the select list.
```
The application may return a database error in its HTTP response, but it may also return a generic error message. In other cases, it may simply return no results. In either case, if we notice any difference in the response, we can determine how many columns are returned by the query.

The second method is to send a series of `UNION SELECT` payloads specifying different numbers of `NULL` values:
```SQL
' UNION SELECT NULL--
' UNION SELECT NULL,NULL--
' UNION SELECT NULL,NULL,NULL--
and so on.
```
If the number of `NULL` values ​​does not match the number of columns, the database returns an error, such as:
```ERROR
All queries combined using a UNION, INTERSECT or EXCEPT operator must have an equal number of expressions in their target lists.
```
We use `NULL` as the values ​​returned from the injected `SELECT` query because the data types in each column must be compatible between the original and injected queries. `NULL` can be converted to any common data type, so this increases the chances of the payload executing successfully if the number of columns is specified correctly.

As with the `ORDER BY` technique, an application may return a database error in its HTTP response, but it may also return a generic error message or simply return no results. When the number of `NULL` values ​​matches the number of columns, the database returns an additional row in the result set containing `NULL` values ​​in each column. The effect this has on the HTTP response depends on the application code. If we are lucky, we will see additional data in the response, such as an extra row in an HTML table. Otherwise, `NULL` values ​​may cause another error, such as `NullPointerException`. In the worst case, the response may look like the response caused by an incorrect number of `NULL` values, which will make this method ineffective.