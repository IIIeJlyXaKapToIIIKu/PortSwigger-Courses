For a CSRF attack to be possible, three key conditions must be met:
1. **Actual action.** There is an action in the application that the attacker has an incentive to force us to perform. This could be a privileged action (such as changing the access rights of other users) or any action with user data (such as changing your own password).
2. **Use of cookie-based sessions.** One or more HTTP requests are sent to perform the action, and the application relies solely on session cookies to determine who sent the request. No other mechanisms for tracking sessions or validating user requests are used.
3. **Absence of unpredictable request parameters.** Requests that perform the action do not contain parameters whose values ​​we (or the attacker) cannot determine or guess. For example, if changing a password requires knowing the current password value, the function will no longer be vulnerable to CSRF.

Let's say the application has a function that allows us to change the email address in our account. When performing this action, we make an HTTP request of the following form:
```Request
POST /email/change HTTP/1.1
Host: vulnerable-website.com
Content-Type: application/x-www-form-urlencoded
Content-Length: 30
Cookie: session=yvthwsztyeQkAPzeQ5gHgTvlyxHfsAfE

email=wiener@normal-user.com
```
This example satisfies the conditions for CSRF:
- The action of changing the email address in an account is of interest to an attacker. After changing the address, the attacker can usually initiate a password reset and completely take over our account.
- The application uses a session cookie to determine who sent the request. There are no additional tokens or mechanisms for tracking sessions.
- An attacker can easily determine the values ​​of the request parameters needed to perform the action.

If these conditions are met, an attacker can create a web page containing the following HTML:
```HTML
<html>
    <body>
        <form action="https://vulnerable-website.com/email/change" method="POST">
            <input type="hidden" name="email" value="pwned@evil-user.net" />
        </form>
        <script>
            document.forms[0].submit();
        </script>
    </body>
</html>
```
If we (the victim user) visit the attacker's page, the following will happen:
- The attacker's page initiates an HTTP request to the vulnerable site.
- If we are logged in to the vulnerable site, our browser will automatically include a session cookie in the request (provided that cookies with the `SameSite` attribute are not used).
- The vulnerable site will process the request normally, treat it as a request from us (the victim user), and change our email address.

> **Note**  
> While CSRF is typically described in the context of cookie-based sessions, it can also occur in other cases where an application automatically adds some user credentials to requests (such as HTTP Basic or certificate-based authentication).